html
  head
    script(src='https://code.jquery.com/jquery-2.2.1.min.js')
    script(src='https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js')
    script(src='/controllers/createPoll.client.js')
    script(src= '/controllers/displayPolls.client.js')
    link(rel='stylesheet', href='https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css')
    link(href="https://fonts.googleapis.com/css?family=Open Sans" rel="stylesheet")
    link(href="https://fonts.googleapis.com/css?family=Prata" rel="stylesheet")
    link(rel='stylesheet', href='/public/main.css')
    title VotingApp - create a poll or cast a vote
  body
    header
      if authorized
        a(role="button" class="btn" href="/profile") Profile
        a(href="/logout" role="button" class="btn") Logout
      else
        a(href="/auth/github" role="button" class="btn") Login with Github
    div(class="container")
      h2= "Welcome, "+user
      div(class="button dropdown note" id="sort") Sort by : 
        select(id="sortselector")
          option(value="trending" selected) Trending
          option(value="random") Random
      div(class= "row" id= "allpolls")
        each poll,index in polls_arr
          div(class="col-md-4 col-sm-4 col-xs-6" id = index)
            h2= poll.title
            p= poll.description
            a(role="button" href="/poll/"+poll._id) View
            p(class="note")= poll.totalvote+' people voted on this'
        div(class="col-md-4 col-sm-4 col-xs-6" id= "addpoll")
          h2 Your poll here
          p= message          
          if authorized
            button(type= "button" class= "btn btn-default btn-lg" data-toggle="modal" data-target="#pollmodal")
              span(class="glyphicon glyphicon-plus" aria-hidden="true")
              span Add poll
          else       
            button(type= "button" class= "btn btn-default btn-lg" id = 'unlogged')
              span(class="glyphicon glyphicon-plus" aria-hidden="true")
              span Add poll
      div(class="modal fade" id="pollmodal" tabindex="-1" role="dialog" aria-hidden="true")
        div(class="modal-dialog" role="document")
          div(class="modal-content")
            div(class="modal-header")
              h5(class="modal-title") New poll
            div(class="modal-body")
              form(id ='createpoll' action = '/newpoll' method = 'post')
                div(class="form-group")
                  label(for="pollTitle" class="col-form-label") Title:
                  input(type="text" class="form-control" name="pollTitle" maxlength="50" required)
                div(class="form-group")
                  label(for="pollDescription" class="col-form-label" ) Description:
                  textarea(class="form-control" name="pollDescription" maxlength="300" required)
                label(for="option1" class="control-label") Options:
                div(class="entry input-group")
                  input(class="form-control" name="option1" type="text" maxlength="30" required)
                  span(class="input-group-btn")
                    button(class="btn btn-success btn-add" type="button")
                      span(class="glyphicon glyphicon-plus" aria-hidden="true")
                br  
                button(type="button" class="btn btn-secondary" data-dismiss="modal") Cancel
                button(type="submit" class="btn btn-info" id="create") Create